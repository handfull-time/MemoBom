<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<title th:text="'MemoBom' + (${pageTitle} != null ? ' - ' + ${pageTitle} : '')">MemoBom</title>

	<th:block th:replace="~{Common/Favicon :: Favicon}"></th:block>
	<script th:inline="javascript">
		window.contextPath = (/*[[@{/}]]*/ '').replace(/\/$/, "");
		console.info('contextPath', window.contextPath);
	</script>

	<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
	<link rel="stylesheet" th:href="@{/css/memoBom.css}">

	<th:block layout:fragment="css"></th:block>

	<style>
		.scrollbar-hide {
			-ms-overflow-style: none;
			scrollbar-width: none;
		}

		.scrollbar-hide::-webkit-scrollbar {
			display: none;
		}
	</style>
</head>

<body class="bg-gray-100 text-slate-900 overflow-hidden text-dynamic-md"
	  data-font-size='xl'>
	  th:attr="data-font-size=${user == null ? 'xl' : user.fontSize}"
	<div class="w-full mx-auto h-[100dvh] flex flex-col bg-white shadow-lg overflow-hidden relative">

		<header th:if="${showHeader == null || showHeader}"
			class="relative h-12 pt-[env(safe-area-inset-top)] shrink-0 border-b border-gray-200 bg-white z-10">
			<th:block layout:fragment="header"></th:block>
		</header>

		<main class="flex-1 min-h-0 overflow-y-auto scrollbar-hide p-2 bg-slate-50">
			<th:block layout:fragment="content"></th:block>
		</main>

		<footer th:if="${showFooter == null || showFooter}"
			class="shrink-0 h-10 border-t border-gray-200 bg-white z-10">
			<th:block layout:fragment="footer"></th:block>
		</footer>
	</div>

	<script type="text/javascript" th:src="@{/js/api.js(v=${assetVersion})}"></script>

	<th:block th:if="${loadScript == null || loadScript}">
		<div th:replace="~{Common/AlertView :: AlertView}"></div>
		<th:block th:replace="~{Common/LoadingOverlay :: LoadingOverlay}"></th:block>
		<th:block th:replace="~{Common/ModalView :: ModalView}"></th:block>
		<script type="text/javascript" th:src="@{/js/MyToast.js(v=${assetVersion})}"></script>
		<script th:inline="javascript">
	
			// 로그인 사용자 (비로그인: null)
			const LOGIN_USER = /*[[${user}]]*/ null;
			const IS_LOGIN = !!(LOGIN_USER && LOGIN_USER.uid);
	
			function toastLoginRequired() {
				showToast?.("로그인 필요", "로그인 후 이용해 주세요.", ToastType?.INFO ?? "info", 1800);
			}
		</script>
	</th:block>

	<th:block layout:fragment="script"></th:block>
</body>

</html>